builds:
  - env:
      - CGO_ENABLED=0
    goos:
      - linux
    goarch:
      - amd64
    main: ./cmd
    ldflags:
      - -s -w

archives:
  - format: tar.gz
    files:
      - LICENSE
      - config.toml
      - queries.sql
      - migrations/*

dockers:
  - goos: linux
    goarch: amd64
    ids:
    - cic-chain-events
    image_templates:
    - "ghcr.io/grassrootseconomics/cic-chain-events/cic-chain-events:latest"
    - "ghcr.io/grassrootseconomics/cic-chain-events/cic-chain-events:{{ .Tag }}"
    dockerfile: Dockerfile
    extra_files:
    - LICENSE
    - config.toml
    - queries.sql
    - migrations/*
